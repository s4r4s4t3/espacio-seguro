{% extends 'base.html' %}
{% block title %}{{ _('游뱋 Amigos - SafeSpace') }}{% endblock %}
{% block content %}

<<<<<<< HEAD
    <div class="card amigos-card">
      <div class="center-content">
        <img src="{{ url_for('static', filename='heart.png') }}" alt="{{ _('Mascota SafeSpace') }}" class="landing-logo" />
        <h2>{{ _('Tus Amigos') }}</h2>
        <!-- Lista de amigos aceptados -->
        <div class="section-title">{{ _('Amigos') }}</div>
        <div class="friends-list">
          {% for amigo in amigos %}
            <div class="card-row">
              <div class="avatar">
                {% if amigo.profile_picture and 'http' in amigo.profile_picture %}
                  <img src="{{ amigo.profile_picture }}" alt="{{ _('Foto de perfil') }}" class="mini-avatar" />
                {% else %}
                  <img src="{{ url_for('static', filename='profile_pics/' + (amigo.profile_picture or 'default.png')) }}" alt="{{ _('Foto de perfil') }}" class="mini-avatar" />
                {% endif %}
              </div>
              <div class="username">{{ amigo.username }}</div>
              <div class="actions">
                <a href="{{ url_for('config.perfil', username=amigo.username) }}" class="btn-view">{{ _('Ver perfil') }}</a>
                <a href="{{ url_for('amigos.eliminar_amigo', user_id=amigo.id) }}" class="btn-reject">{{ _('Eliminar') }}</a>
              </div>
            </div>
          {% else %}
            <div class="empty-msg">{{ _('A칰n no agregaste amigos.') }}</div>
          {% endfor %}
        </div>

        <!-- Solicitudes recibidas -->
        <div class="section-title">游닌 {{ _('Solicitudes recibidas') }}</div>
        <div class="requests-list">
          {% for solicitud in solicitudes %}
            <div class="card-row">
              <div class="avatar">游녻</div>
              <div class="username">{{ solicitud.sender_username }}</div>
              <div class="actions">
                <a href="{{ url_for('amigos.aceptar', solicitud_id=solicitud.id) }}" class="btn-accept">{{ _('Aceptar') }}</a>
                <a href="{{ url_for('amigos.rechazar', solicitud_id=solicitud.id) }}" class="btn-reject">{{ _('Rechazar') }}</a>
              </div>
=======
  <div class="card amigos-card">
    <div class="center-content">
      <img src="{{ url_for('static', filename='heart.png') }}" alt="{{ _('Mascota SafeSpace') }}" class="landing-logo" />
      <h2>{{ _('Tus Amigos') }}</h2>
      <p class="subtitle">{{ _('A칰n no agregaste amigos.') }} 游눜</p>

      <div class="section-title">游닌 {{ _('Solicitudes Recibidas') }}</div>
      <div class="requests-list">
        {% for solicitud in solicitudes %}
          <div class="card-row">
            <div class="avatar" aria-hidden="true">游녻</div>
            <div class="username">{{ solicitud.sender_username }}</div>
            <div class="actions">
              <a href="/aceptar/{{ solicitud.id }}" class="btn-accept">{{ _('Aceptar') }}</a>
              <a href="/rechazar/{{ solicitud.id }}" class="btn-reject">{{ _('Rechazar') }}</a>
>>>>>>> 6530948 (feat: i18n + PWA offline; SW v1.0.1, manifest EN y base din치mica; JS chat/toggles/previews/dark-mode)
            </div>
          </div>
        {% else %}
          <div class="empty-msg">{{ _('No ten칠s solicitudes nuevas.') }}</div>
        {% endfor %}
      </div>

<<<<<<< HEAD
        <!-- Buscador y otros usuarios -->
        <div class="section-title">游깴 {{ _('Buscar usuarios') }}</div>
        <input type="text" id="friendSearch" class="search-input" placeholder="{{ _('Buscar por nombre...') }}" />
        <div class="users-list" id="usersList">
          {% for user in usuarios %}
            <div class="card-row user-row">
              <div class="avatar">游녻</div>
              <div class="username">{{ user.username }}</div>
              <div class="actions">
                <a href="{{ url_for('amigos.enviar_solicitud', user_id=user.id) }}" class="btn-add">{{ _('Agregar amigo') }}</a>
              </div>
            </div>
          {% else %}
            <div class="empty-msg">{{ _('No hay usuarios disponibles.') }}</div>
          {% endfor %}
        </div>

        
=======
      <div class="section-title">游깴 {{ _('Otros usuarios') }}</div>
      <div class="users-list">
        {% for user in usuarios %}
          <div class="card-row">
            <div class="avatar" aria-hidden="true">游녻</div>
            <div class="username">{{ user.username }}</div>
            <div class="actions">
              <a href="/enviar_solicitud/{{ user.id }}" class="btn-add">{{ _('Agregar amigo') }}</a>
            </div>
          </div>
        {% endfor %}
>>>>>>> 6530948 (feat: i18n + PWA offline; SW v1.0.1, manifest EN y base din치mica; JS chat/toggles/previews/dark-mode)
      </div>
    </div>
  </div>

<<<<<<< HEAD
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const searchInput = document.getElementById('friendSearch');
      const userRows = document.querySelectorAll('#usersList .user-row');
      if (searchInput) {
        searchInput.addEventListener('input', function() {
          const term = this.value.toLowerCase();
          userRows.forEach(row => {
            const username = row.querySelector('.username').textContent.toLowerCase();
            if (username.includes(term)) {
              row.style.display = 'flex';
            } else {
              row.style.display = 'none';
            }
          });
        });
      }
    });
  </script>
=======
  <button id="darkModeToggle" title="{{ _('Modo claro/oscuro') }}" aria-label="{{ _('Modo claro/oscuro') }}" class="dark-toggle">游깿</button>
>>>>>>> 6530948 (feat: i18n + PWA offline; SW v1.0.1, manifest EN y base din치mica; JS chat/toggles/previews/dark-mode)
{% endblock %}
