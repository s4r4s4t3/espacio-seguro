<!-- templates/landing.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>{{ _('SafeSpace - Tu lugar de apoyo') }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  
  <!-- üåç Script de detecci√≥n autom√°tica de idioma -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const langCookieSet = document.cookie.includes('lang=');
      const alreadyRedirected = sessionStorage.getItem('autoLangSet');

      if (!langCookieSet && !alreadyRedirected) {
        const browserLang = navigator.language.slice(0, 2).toLowerCase();
        const supportedLangs = ['es', 'en', 'pt', 'br', 'de', 'fr', 'it'];

        if (supportedLangs.includes(browserLang)) {
          sessionStorage.setItem('autoLangSet', '1');
          window.location.href = `/set_language/${browserLang}`;
        }
      }
    });
  </script>
</head>
<body>
  <!-- Header con logo y selector idioma con banderas -->
  <header>
    <div class="logo">
      <h1>SafeSpace</h1>
    </div>
    <div class="language-selector dropdown">
      <button class="dropbtn">{{ _('üåê Idioma') }}</button>
      <div class="dropdown-content">
        <a href="{{ url_for('home.set_language', lang_code='es') }}">
          <img src="{{ url_for('static', filename='flags/es.png') }}" alt="{{ _('Espa√±ol') }}"> {{ _('Espa√±ol') }}
        </a>
        <a href="{{ url_for('home.set_language', lang_code='en') }}">
          <img src="{{ url_for('static', filename='flags/en.png') }}" alt="{{ _('English') }}"> {{ _('English') }}
        </a>
        <a href="{{ url_for('home.set_language', lang_code='pt') }}">
          <img src="{{ url_for('static', filename='flags/pt.png') }}" alt="{{ _('Portugu√™s') }}"> {{ _('Portugu√™s') }}
        </a>
        <a href="{{ url_for('home.set_language', lang_code='br') }}">
          <img src="{{ url_for('static', filename='flags/br.png') }}" alt="{{ _('Portugu√™s (Brasil)') }}"> {{ _('Portugu√™s (Brasil)') }}
        </a>
        <a href="{{ url_for('home.set_language', lang_code='de') }}">
          <img src="{{ url_for('static', filename='flags/de.png') }}" alt="{{ _('Deutsch') }}"> {{ _('Deutsch') }}
        </a>
        <a href="{{ url_for('home.set_language', lang_code='fr') }}">
          <img src="{{ url_for('static', filename='flags/fr.png') }}" alt="{{ _('Fran√ßais') }}"> {{ _('Fran√ßais') }}
        </a>
        <a href="{{ url_for('home.set_language', lang_code='it') }}">
          <img src="{{ url_for('static', filename='flags/it.png') }}" alt="{{ _('Italiano') }}"> {{ _('Italiano') }}
        </a>
      </div>
    </div>
  </header>

  <!-- Hero principal -->
  <main>
    <section class="hero">
      <h2>{{ _('Tu espacio de contenci√≥n y apoyo real') }}</h2>
      <p>{{ _('Conect√° con personas que entienden lo que sent√≠s, sin juicios.') }}</p>
      <div class="cta-buttons">
        <a href="{{ url_for('auth.login') }}" class="btn">{{ _('Iniciar Sesi√≥n') }}</a>
        <a href="{{ url_for('auth.register') }}" class="btn secondary">{{ _('Crear Cuenta') }}</a>
      </div>
      <div class="google-btn">
        <a href="/login/google" class="btn google">
          <img src="{{ url_for('static', filename='icons/google.svg') }}" alt="Google Icon">
          {{ _('Iniciar sesi√≥n con Google') }}
        </a>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <p>{{ _('¬© 2025 SafeSpace. Todos los derechos reservados.') }}</p>
    <p>
      <a href="{{ url_for('legales.terms') }}">{{ _('T√©rminos y Condiciones') }}</a> |
      <a href="{{ url_for('legales.privacy') }}">{{ _('Pol√≠tica de Privacidad') }}</a>
    </p>
    <p>{{ _('S√≠guenos en Instagram y TikTok') }}</p>
  </footer>
</body>
</html>
